<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Navigating the source code | Pencil2D Developer Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
 <header class="site-header" role="banner">
  <div class="wrapper">
   <img src="pencil2d.png" style="float:left; width:54px; margin-right: 10px;" />
   <a class="site-title" href="//www.pencil2d.org/">Pencil2D Animation</a>
   <nav class="site-nav">
    <input type="checkbox" id="nav-trigger" class="nav-trigger" />
    <label for="nav-trigger">
     <span class="menu-icon">
      <svg viewBox="0 0 18 15" width="18px" height="15px">
       <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
       <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
       <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
      </svg>
     </span>
    </label>
    <div class="trigger">
     <a class="page-link" href="//www.pencil2d.org/download">Download</a>
     <a class="page-link" href="//www.pencil2d.org/community">Community</a>
     <a class="page-link" href="//www.pencil2d.org/news.html">News</a>
     <a class="page-link" href="//www.pencil2d.org/doc">Docs</a>
     <a class="page-link" href="//www.pencil2d.org/contribute">Contribute</a>
    </div>
   </nav>
  </div>
 </header>
 <section class="page-header">
  <h1 class="project-name">Navigating the source code</h1>
 </section>
</div>
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Navigating the source code </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md36">Projects</a></li>
<li class="level1"><a href="#autotoc_md37">Where to start with?</a><ul><li class="level2"><a href="#autotoc_md38">The entry point</a></li>
<li class="level2"><a href="#autotoc_md39">MainWindow</a><ul><li class="level3"><a href="#autotoc_md40">Menus</a></li>
<li class="level3"><a href="#autotoc_md41">Subpanels</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md42">Object</a></li>
<li class="level2"><a href="#autotoc_md43">ActionCommands</a></li>
<li class="level2"><a href="#autotoc_md44">Editor</a></li>
<li class="level2"><a href="#autotoc_md45">Manager classes</a></li>
<li class="level2"><a href="#autotoc_md46">ScribbleArea</a></li>
<li class="level2"><a href="#autotoc_md47">Timeline</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md_docs_dive_into_code"></a></p>
<p>This is an overview of <a class="el" href="class_pencil2_d.html" title="The main application class handling startup as well as the main loop.">Pencil2D</a> code base.</p>
<h1><a class="anchor" id="autotoc_md36"></a>
Projects</h1>
<p>The pencil2d project is organized into 3 sub-projects:</p>
<ul>
<li><code>app</code>: holding everything related to GUI, e.g, tool panel, colour wheel and Timeline etc.</li>
<li><code>core_lib</code>: the engine of <a class="el" href="class_pencil2_d.html" title="The main application class handling startup as well as the main loop.">Pencil2D</a>, mostly about animation, drawing and tool manipulations.</li>
<li><code>tests</code>: a collection of unit tests.</li>
</ul>
<p>You can see these 3 subprojects in QtCreator when you open the <a class="el" href="class_pencil2_d.html" title="The main application class handling startup as well as the main loop.">Pencil2D</a> project and find identical folder names in the repository.</p>
<h1><a class="anchor" id="autotoc_md37"></a>
Where to start with?</h1>
<p>At the time of writing, there are nearly 200 source files in the <a class="el" href="class_pencil2_d.html" title="The main application class handling startup as well as the main loop.">Pencil2D</a> repository. But you only need to focus on a few of them to start with, the most important classes which form the backbone of <a class="el" href="class_pencil2_d.html" title="The main application class handling startup as well as the main loop.">Pencil2D</a>. They are <code><a class="el" href="class_main_window2.html">MainWindow2</a></code>, <code><a class="el" href="class_editor.html">Editor</a></code>, <code><a class="el" href="class_object.html">Object</a></code> and <code><a class="el" href="class_scribble_area.html">ScribbleArea</a></code>. Once you get the idea of how these classes work, you will be able to pick up <a class="el" href="class_pencil2_d.html" title="The main application class handling startup as well as the main loop.">Pencil2D</a> codebase very quickly.</p>
<h2><a class="anchor" id="autotoc_md38"></a>
The entry point</h2>
<p>Let's start with <code><a class="el" href="main_8cpp_source.html">app/src/main.cpp</a></code>, the entry point of <a class="el" href="class_pencil2_d.html" title="The main application class handling startup as well as the main loop.">Pencil2D</a> (and most of C++ programs as well). Skip the command-line handling code at the moment and go to the line <code><a class="el" href="class_main_window2.html">MainWindow2</a> mainWindow;</code> (it's at line 220 at the time of writing). The <a class="el" href="class_pencil2_d.html" title="The main application class handling startup as well as the main loop.">Pencil2D</a> application starts here.</p>
<h2><a class="anchor" id="autotoc_md39"></a>
MainWindow</h2>
<p><b><a class="el" href="class_main_window2.html">MainWindow2</a></b>, as the name said, is the main window you will see when launching <a class="el" href="class_pencil2_d.html" title="The main application class handling startup as well as the main loop.">Pencil2D</a>. Have a look at the constructor in <code><a class="el" href="mainwindow2_8cpp_source.html">mainwindow2.cpp</a></code>, you will find the initialization process of <a class="el" href="class_pencil2_d.html" title="The main application class handling startup as well as the main loop.">Pencil2D</a>. In the constructor, it creates an <code><a class="el" href="class_object.html">Object</a></code> (An animation project which holds layers &amp; frames), <code><a class="el" href="class_editor.html">Editor</a></code> (the central part of the animation engine), <code><a class="el" href="class_scribble_area.html">ScribbleArea</a></code> (where you draw things) and all subpanels including tools, colour wheel, timeline etc.</p>
<p>MainWindow acts as a bridge between the GUI widgets and the core engine.</p>
<h3><a class="anchor" id="autotoc_md40"></a>
Menus</h3>
<p>It's good to pick a menu action, for example: <b>Open a Project</b> to start your journey in <a class="el" href="class_pencil2_d.html" title="The main application class handling startup as well as the main loop.">Pencil2D</a> codebase.</p>
<p>Firstly, go to <code>MainWindow2::createMenus()</code>, where all the menu actions are connected.</p>
<p>Let's take the following line as an exmaple: </p><div class="fragment"><div class="line">connect(ui-&gt;actionOpen, &amp;<a class="code hl_functionRef" href="https://doc.qt.io/qt-5/qaction.html#triggered">QAction::triggered</a>, <span class="keyword">this</span>, &amp;MainWindow2::openDocument);</div>
<div class="ttc" id="aqaction_html_triggered"><div class="ttname"><a href="https://doc.qt.io/qt-5/qaction.html#triggered">QAction::triggered</a></div><div class="ttdeci">void triggered(bool checked)</div></div>
</div><!-- fragment --><p> it tells you one thing: when a user hits <b>Open</b> from the File menu, it calls <code>MainWindow2::openDocument()</code>.</p>
<p>Reference: <a href="http://doc.qt.io/qt-5/signalsandslots.html">Qt signal &amp; slot</a></p>
<p>And then you are able to figure out what actually happens when opening a file by seeing the function <code>MainWindow2::openDocument()</code>. (Tip: jump to the function by Ctrl + clicking the function name in QtCreator)</p>
<p>Similarly, you can do this with all other menu actions. It will give you a good start point to learn the codebase.</p>
<h3><a class="anchor" id="autotoc_md41"></a>
Subpanels</h3>
<p>MainWindow holds all the subpanels (which are called <b>Widgets</b> in <a class="elRef" href="https://doc.qt.io/qt-5/qt.html">Qt</a>'s way). <code>MainWindow2::createDockWidgets()</code> creats and initialises subpanels. All subpanels have straight forward C++ class names like <code>Timeline</code> or <code>ToolBox</code>. Simply go to the corresponding cpp file for further details.</p>
<p><img src="https://i.imgur.com/ck4aIpA.png" alt="Imgur" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md42"></a>
Object</h2>
<p><b><a class="el" href="class_object.html">Object</a></b> keeps your animation assets. Go to <code><a class="el" href="object_8h_source.html">object.h</a></code>, you can see that a <code><a class="el" href="class_object.html">Object</a></code> object holds a list of Layers (<code><a class="elRef" href="https://doc.qt.io/qt-5/qlist.html">QList</a>&lt;Layer*&gt; mLayers;</code>). And a layer holds keyframes. Opening a project is the process of converting a pclx file into a <code><a class="el" href="class_object.html">Object</a></code> structure. Similarly, saving a project is a process of converting the <a class="el" href="class_object.html">Object</a> structure back into a pclx file.</p>
<p>Currently, there are 4 types of <a class="el" href="class_layer.html">Layer</a>: Bitmap, Vector, Sound and <a class="el" href="class_camera.html">Camera</a> layer. And 4 types of KeyFrames: <a class="el" href="class_bitmap_image.html">BitmapImage</a>, <a class="el" href="class_vector_image.html">VectorImage</a>, Soundclip and <a class="el" href="class_camera.html">Camera</a>. When a user adds a new bitmap key, it literally creates a <a class="el" href="class_bitmap_image.html">BitmapImage</a>, and then insert it into a Bitmap <a class="el" href="class_layer.html">Layer</a>.</p>
<h2><a class="anchor" id="autotoc_md43"></a>
ActionCommands</h2>
<p>Every method in action commands is bound to an action in the menu/top bar. Use this method to trigger a behaviour or widget. As long the behaviour is directly bound to the action, it should be implemented here.</p>
<p><b>Example1</b>: You implement a new widget and bind the action to ActionCommands::foo()</p>
<p>Foo opens a widget that does x instantly. This is fine. Another outcome: Foo adds a new keyframe, this is also fine.</p>
<p><b>Example2</b>: You implement a new widget and bind the action to ActionsCommands::foo(), You trigger some behaviour via a button or other UI related command, now foo() calls ActionCommands::bah().</p>
<p>This is wrong since bah() is not directly triggered by a command. bah() should instead be implement somewhere else where appropriate.</p>
<h2><a class="anchor" id="autotoc_md44"></a>
Editor</h2>
<p>The class that keeps the bridge between the UI/Widget related code and the core engine, as well as where all managers are handled.</p>
<p>As of writing this the editor holds a property for</p><ul>
<li><a class="el" href="class_color_manager.html">ColorManager</a></li>
<li><a class="el" href="class_tool_manager.html">ToolManager</a></li>
<li><a class="el" href="class_layer_manager.html">LayerManager</a></li>
<li><a class="el" href="class_playback_manager.html">PlaybackManager</a></li>
<li><a class="el" href="class_view_manager.html">ViewManager</a></li>
<li><a class="el" href="class_preference_manager.html">PreferenceManager</a></li>
<li><a class="el" href="class_sound_manager.html">SoundManager</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md45"></a>
Manager classes</h2>
<p>All manager classes are required to derive from <a class="el" href="class_base_manager.html">BaseManager</a>, a class which contains two core members and some virtual methods.</p><ul>
<li><a class="el" href="class_editor.html">Editor</a></li>
<li><a class="el" href="class_object.html">Object</a></li>
</ul>
<p>The manager classes are to be independent of each other and should be treated as such. Their objective is to decouple logic from <a class="el" href="class_editor.html">Editor</a> and make it easier to organise and write tests.</p>
<h2><a class="anchor" id="autotoc_md46"></a>
ScribbleArea</h2>
<p>The <a class="el" href="class_scribble_area.html">ScribbleArea</a> is currently a collection point where preparations are made before content is being applied to the canvas. All widgets that interacts with the canvas in one with or another, goes through this class.</p>
<p>Some things that are handled here:</p><ul>
<li>Event management (ie. mouse and tablet events)</li>
<li>Selection related modifications and transformations</li>
<li>Canvas cursor drawing</li>
<li>Bitmap buffer painting</li>
<li>Stroke dab making ie. all "drawFoo related methods"</li>
</ul>
<h2><a class="anchor" id="autotoc_md47"></a>
Timeline</h2>
<p>This class is only interesting if you wish to make changes to the top row, ie. the buttons or anything related to the widget itself. This class is not where you make modifications to the cells.</p>
<p><img src="https://user-images.githubusercontent.com/1045397/51429110-a336b400-1c0b-11e9-9bcc-ad33d0ff2689.png" alt="image" class="inline"/></p>
<p>Assuming you wanted to improve the cell UI/UX experience, then TimelineCells is much more interesting, since this is where all of that (see below) is drawn</p>
<p><img src="https://user-images.githubusercontent.com/1045397/51429139-e7c24f80-1c0b-11e9-9b18-39495ef2afea.png" alt="image" class="inline"/> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.6-->
<!-- start footer part -->
<section class="main-content">
 <footer class="site-footer">
  <span class="site-footer-owner">
   Generated on Tue May 7 2024 15:58:28 for Pencil2D by&#160;<a href="https://www.doxygen.org/index.html">doxygen</a> 1.9.6
  </span>
  <span class="site-footer-credits">
   based on revision 7389e2607bd6f8de2ba4e7f67925d13153c5ccdf
  </span>
  <!-- SVG icons from https://iconmonstr.com -->
  <!-- Github icon -->
  <span class="my-span-icon">
   <a href="https://github.com/pencil2d/pencil" aria-label="pencil2d's GitHub" title="pencil2d's GitHub">
    <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
   </a>
  </span>
  <!-- Bitbucket icon -->
  <span class="my-span-icon">
   <a href="https://bitbucket.org/chchwy/pencil2d" aria-label="pencil2d's Bitbucket" title="pencil2d's Bitbucket">
    <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-6.551 6.411l13.101.023c.28 0 0.49.233.443.513l-1.912 11.679c-.047.21-.233.373-.443.373h-9.138c-.303 0-.559-.21-.606-.513l-1.888-11.563c-.047-.256.163-.513.443-.513zm8.019 8.346h-2.914l-.769-4.126h4.406l-.723 4.126z"/></svg>
   </a>
  </span>
  <!-- Twitter icon -->
  <span class="my-span-icon">
   <a href="https://twitter.com/pencil2d" aria-label="pencil2d's Twitter" title="pencil2d's Twitter">
    <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"/></svg>
   </a>
  </span>
  <!-- Contact icon -->
  <span class="my-span-icon">
   <a href="mailto:pencil2danimation@gmail.com" aria-label="Contact" title="Contact pencil2d">
    <svg class="my-svg-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 .02c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.99 6.98l-6.99 5.666-6.991-5.666h13.981zm.01 10h-14v-8.505l7 5.673 7-5.672v8.504z"/></svg>
   </a>
  </span>
 </footer>
</section>
</body>
</html>
